# Animal Health Tracker Process Journal
## Journal Entries

### Entry 1
Today we brainstormed potential projects to work on, we did this by initially grouping up and concepting ideas based off of generated factors such as whether the device used mechanical inputs or biometrics, or if it is a product for a human or not. W came up with a couple ideas detailed in the choosing a project section. After that I used the generator to help me with a baseline for my project. I decided to make a custom device for non-humans, that uses biometric inputs in an informative way. After some thought on this I had defined my product to be a pet health tracker, that would take biometric data of the users pet and give that information on a webpage.  <br>

### Entry 2
Today we spoke about my project idea and spoke about some of its possible benefits and disadvantages that may arise. Some disadvantages were that it may be difficult to find a sensor that could track the animal's heartbeat or temperature from the neck area. A point made by one of my classmates was that the ear can be quite a good option for this that is readily used in the medical industry and used to measure oxygen levels. Instead of detecting the animal's temperature it could instead detect the environment temperature the animal is within using the microbits thermostat. <br>
The benefits of this could be to know how active the pet my be with the addition of a pedometer or gyro sensor. Having an lcd on the microbit it can also show a status of the pet on its collar as well as on the website in the form of a dynamic face. <br>

### Entry 3
I purchased a pulse sensor from Ebay that will arrive within the week for use in my project. I also began testing features using the microbit controller. I used the built in temperature sensor to set the temperature variable and then checked if the temperature was within 3 different ranges, setting the pets overall temperature condition depending on which range it was within such as cold, fine, or hot. I also setup a calibratable step counter that checks for changes in the microbits accelerometer that will count steps and calculate walk distance based on the set average step distance.<br>

### Entry 4
This week we spoke about how my device can benefit the user, have its own unique aspects, and have a strong foundation. We also speculated how our projects could evolve or adapt, and conceptualised other potential options.

How can my project have a strong conceptual foundation? <br>
My device will be shaped around meeting the needs of pet homeowners who want more information about their pet, in a fun new way. The pet health industry already has a lot of research, and it will be tested on animals. <br>

How will my project benefit the user, why would they want to use it? <br>
It will benefit the user by giving them a simple effective means to check their pet's overall health and activity. <br>

What is it similar to? <br>
This device shares similarities to other pet health trackers shown below, especially the PetPace dog collar. It will also share similarities to a fitbit. <br>

How is it unique <br>
My device is unique because it gives the user fun images of cats alongside the information about their pet health. It will have a warning system to alert the user of health changes and a display on the device that is quicker than checking the website information. These are all features its competitors don't have.


<br>

## Choosing A Project
In this section, using the provided concept generator tool I used the generated options both individually and, in a group, to come up with possible project ideas relating to responsive design.

<br>

### Quick Ideas - Group
1. <br>
Form - Custom hardware, physical hardware each person places finger on a device sensor <br>
Configuration - Multi person, game with multiple people causing stress <br>
Input - Biometrics - measuring heartrate of each person and anyone outside the measured output sends data <br>
Output - Haptic - Highest measurement gets zapped by device <br>

2. <br>
Form - Mobile app <br>
Configuration - Multiperson use app on their phone. <br>
Input - Environment Sensors collects each person's data (Geolocation) gives their weather <br>
Output - Informational Tells people if they will also get rain

<br>

### My Ideas - Individual
Form - Custom Hardware <br>
Configuration - Nonhuman <br>
Input - Biometrics <br>
Output - Informational <br>
This could be an informative biometrics reader for cats and dogs, to inform the owner of the animal's health such as vitals, temperature, and fatigue. It could be made from a microbit with a heart rate monitor and reading the animals temperature, a Wi-Fi chip or Bluetooth could be used to send the information to a web application. This device could be made in a small form factor to be used as a collar attachment, provided these biometrics can be read from the neck area and cause minimal discomfort.

<br>

### Idea Feedback
We spoke about my project idea and spoke about some of its possible benefits and disadvantages that may arise. Some disadvantages were that it may be difficult to find a sensor that could track the animal's heartbeat or temperature from the neck area. A point made by one of my classmates was that the ear can be quite a good option for this that is readily used in the medical industry and used to measure oxygen levels. Instead of detecting the animal's temperature it could instead detect the environment temperature the animal is within using the microbits thermostat. <br>
The benefits of this could be to know how active the pet may be with the addition of a pedometer or gyro sensor. Having a lcd on the microbit it can also show a status of the pet on its collar as well as on the website in the form of a dynamic face smile or frown. 

<br>

## Similar Projects
### MeasureON!
MeasureON! is a dog heartrate monitor app that pairs with a device and provides consistent heart rate monitoring. It uses a harness that places the monitor on the lateral sides of the chest using sensory combs that manoeuvre through the dog's fur, alleviating the need to shave. This device is mainly used by veterinarians and requires hypoallergenic gel to be applied for conductivity. <br>
Device also measures temperature, respiratory rate, relative activity level, and ambient conditions. <br>
For this product, I like how they have used a harness to ensure the device stayed affixed in the optimal location. This may benefit my product. The downside is that this device is specifically for dogs, and if my product uses a harness, it would need multiple harness sizes to accommodate large and small animals of different types. The sensor used is an effective option for heartrate monitoring, though I do not want the home user to need to apply a gel for results. <br>

![Dog Heart Rate Monitor](images/HRM1.jpg)
![Dog Heart Rate Monitor](images/HRM2.jpg)

<br>

### PetPace AI Smart Collar
PetPace is an AI smart collar that continually monitors a pet's health and GPS location, sending data to a phone app for pet owners to view. The device examines all essential vitals and biometrics to collect data that then through machine learning observes your pet's health over time, collecting essential data for your vet. The app sends alerts of early warning signs for need of veterinary care and also correlates your pet's data against thousands of similar pets. Thanks to the device collecting data every 2 minutes you can keep a constant update of your pet's condition through the app to check your pet's temperature, heart and respiration rate, the condition of its activity and sleep, as well as its GPS location. <br>
This product is a very good example of what I want my device to achieve, it gives in-depth results that my device would benefit from. I am not a huge fan of the collar approach; however the collar provides a one size fits all format, and the sensor used seems effective. I will need to find a way to make my device unique from this one with features such as an in-built display, warning system, and a different approach to presenting results. <br>

![PetPace Smart Collar](images/PPC2.png)
![PetPace Smart Collar App](images/PPC1.png)

<br>

### UID Temperature Monitoring System
The UID temperature monitoring system is an implanted RFID microchip that will measure an animal's temperature with high accuracy. Microchip readers are used to scan the chips measurements that are then sent to a computer using wireless or serial link communication. Microchips contain on-board memory for customised identifiers of each subject such as unique identifiers, gender, DOB, study number etc. System generally used for animals in a clinical or research setting and is beneficial for streamline temperature collection that is safer and more accurate than traditional methods. <br>
This device is a different approach to monitoring animal biometrics; however an owner may not want an implant in their pet, and the requirement for an infrared scanner is not an appropriate solution for checking the device. I like the stored information used to identify which animal is being scanned, as well as other information associated with that specific anim. This could benefit my product with bio information of the pet that is using the device. <br>

![Temperature Monitoring System](images/UID1.png)
![Temperature Monitoring System](images/UID2.png)

<br>

### Infrared Thermometer
The infrared monitor is a less invasive method for home users to check their pet's temperature. Using a long probe the device measures heat waves around the ear drums and only requires one second to measure. The device allows for the sound to be turned off to avoid scaring the animal and has the option to view the temperature in degrees Celsius and Fahrenheit. <br>
An infrared thermometer may be an option to get temperature results of the pet, however a small device that must stay attached to the pet's ear would not be comfortable for the pet, making it not feasible just to get the added benefit of the pets temperature readout. <br>

![Infrared Thermometer](images/IT1.jpg)
![Infrared Thermometer](images/IT2.jpg)

<br>

# Pet Health Tracker
## Overview
Wearable technology senses biometric data of pets.
A device for the user to keep track of their pet's health and wellbeing. Using different biometric sensors, it may collect input data such as heart rate, temperature, number of steps and walk distance, and return output data of the overall health and happiness of the pet along with all information used to determine the results. It features a display to quickly check the results and alerts the user with an alarm or sound when the pets health changes or is in poor condition. <br>
The data will be readable from a web page that will show details about each aspect of the pet and rate its overall happiness. It will also show random images themed to each status that sums up the pet's active levels, temperature, and happiness. Images are sourced from API's.

<br>

### Technology Required
Microbit V2 - microcontroller used to collect data and power devices. <br>
Pulse Sensor - reads the animals heartbeat. <br>
Accelerometer - reads number of steps taken or speed of movement. <br>
Thermometer - reads the external temperature surrounding the pet. <br>

### Concept Designs
I have worked on some concept designs of my product to work out what devices might be used and how they would be setup to be attached to my pet. Below is a design depicting the devices that would be used as well as two different variations, a collar, and a harness set-up. <br>

![Device Concept](images/DC.png) <br>

This image is a concept design of the webpage layout, showing the different forms of information that may be provided, and a concept of the different cat images that may be shown. <br>

![Webpage Concept](images/WC.png) 

<br>

## Development Process
### Microbit Tests
To get started on the device, I began by testing the microbits built in sensors that could benefit the project. <br>
I started with the temperature sensor, trying to detect the external temperature of the environment that the pet would be in. To do this I created a temperature variable that I then set to the current temperature the microbit sensor was receiving. Then I checked if the temperature was below 15 degrees that is a temporary number I've defined as cold, and if not, I checked if it was in a range between 15 and 30 that I defined as fine, and if not I checked if it was over 30 degrees that I defined as hot. Depending on the range that the temperature was in I set a variable for temperature state as either 0, 1, or 3, that I will use later to calculate the pet's overall condition. Finally using temp state, I can then check at any time whether I want to show a happy or unhappy face on the microbit and play a melody when the temperature has entered a new range by only calling it if the temp state is not set to the current range. for the option of showing Fahrenheit on the eventual web page I also calculated it from the set temperature by applying the equation F = C x (9/5) + 32. For convenience and reusability, I separated these into separate functions. <br>

![Make Code Temperature](images/MC1.png) 

<br>

To create a step counter for the pets, I first tested the on-shake function to increment steps when the microbit was shaken. However, I quickly discovered that the built in shake function was not sensitive enough to register steps from a smaller animal, and could not be adjusted. Following online information, I found that an alternative to this is to check for changes in the microbits accelerometer strength value. I first implemented this method by checking if the acceleration strength was greater than a defined value, and then increasing the steps variable by 1. To take this further I also created a walk distance variable to calculate the distance walked by the pet, based off of the average step distance and then multiplying it by the number of steps taken. This will only be an estimation but is still a useful feature to have on the product. <br>
Unfortunately this method to gather the number of steps taken proved to be ineffective as this function was simply called in the forever method, resulting in many steps being registered as long as the acceleration value was exceeding the defined strength value. <br>
I also utilised button A and B on the device as a function to check the number of steps taken, as well as resetting the step counter and walk distance. The benefit of the pet state function allowed me to return to the pet state image after 2 seconds. <br>

![Make Code Step Counter](images/MC2.png)

<br>

To fix the step counter I performed some various tests and eventually found the best option was to refine the strength value and also create a variable to check if a step had been recently registered to limit the number of multiple steps being registered in a single step, that would be set to true once a step was taken. after .2 seconds the variable would be reverted to false to allow the next step to be registered. This effectively allows the apex of the accelerometer strength value to be limited to a timeframe and strength that may be adjusted through testing to find the perfect values. This is a rudimentary method to achieve this with certain inaccuracies that may arise but seems to be the best option for the use case. <br>
I also added a clear screen function when button A or B was pressed for a cleaner outcome when showing step values on the LED display. <br>

![Make Code Step Counter](images/MC3.png)

<br>

As the set temp function did not need to be checked every tick of the microbit, I moved it to its own timed loop that could check the temperature every 5 seconds for the time being. This will most likely be changed to every minute or 5 minutes as the temperature will generally not change that often resulting in unnecessary calls. <br>
Also, as the microbit is a V2 it has a logo button that may be pressed, so I utilised its functionality to show the current temperature in degrees Celcius when pressed, before returning to the current pet state. <br>

![Button Shows Temp](images/MC4.png)

<br>

### Adding A Pulse Sensor
On make code I setup a simple function to read the inputs from the pulse sensor. I began by creating 2 variables called heartRate and heartRateSmoothed. I will be using the microbit pin 0 to read the values received from the pulse sensor, so I set the heartRate variable to the pin 0 using analog read pin, which then was made visible using serial write value. To get a smoothed result I then used a calculation for smoothing the values of the heartRate variable that is shown below. This required a variable I called ratio that could be changed to increase or decrease the smoothing that I currently set to '.05'. heartRateSmoothed was also made visible using serial read value. <br>

![Button Shows Temp](images/MC5.png) <br>

After connecting the pule sensor device to the micro bit using its 3-volt, earth, and 0 pins, I was able to receive data and check the sensors effectiveness. Below you can see the sensor reading my heart rate with the raw data on the bottom and the smoothed data on top. <br>

![My Heart Rate](images/MC6.png) <br>

Now that I have confirmed the code and sensor is working, I began tests with the sensor on my cat. Right away I was having trouble reading the pets heartrate as pointed out by my tutor because the pulse sensor requires skin contact for effective results. Luckily my cat has very short hair and areas with visible skin so after testing different areas such as the neck, chest, and skin, I found an area on the neck that gave results. Unfortunately, these results still are not great, and in most scenarios using this sensor on other pets with more fur the user would have trouble getting effective results. This creates a problem for my devices main use case, and I will have to think about whether I should try other sensor types or even reevaluate what my device could be used for, or even change it entirely. <br>

![Cats Heart Rate](images/MC7.png) <br>

I have decided in the meantime to continue with the device as intended, and if I can't use the heart rate monitor effectively for my pet then I would leave it as conceptual as more complex devices would be required. Moving on, I decided to make code to read the beats per minute from the smoothed result. The approach I have taken for this is not perfect and may require more vigorous smoothing to be more accurate. What I have done is taken the smoothed heart rate and each time it updates the value, it would check if it is lower than the last value, determining that it has reached the peak of the heart beat and is now reducing. Then it would add to the number of heart beats and set a variable to ensure other beats aren't added until the heartrate starts to increase from its previous result. It would continue to do this and count beats, and it would check the number of beats every 5 seconds and calculate the average BPM from that value. I can later increase the window between bpm calculations for more accurate readings.

![BPM Code](images/MC8.png) <br>

### Webpage Development
Taking a break from microbit coding, I moved onto doing some concept designs that are detailed in the concept designs section, this would help me better understand the layout of the webpage and what information it would display. <br>
To get started I began categorising each section of the webpage into different containers so that they may be laid out in the desired format. For now, I have filled in the page with placeholder information that would later be changed for the dynamic inputs from the microbit. The categorise containers and headers share classes so I can style them all the same for quicker implementation. This is the same for the placeholder image that I have used. Below you can see my current setup, the pet overview has prefilled information as a bio of my pet, I would like it to give the option for the user to fill this information that would then be stored on the device, however I think that is beyond the scope of this task so for now the device will have this information hard coded to my pet specifically. <br>

![Webpage Format](images/WP1.png) <br>

I then implemented some basic styling to the webpage cascading style sheet. For this I consulted Chat GPT to help me implement flexboxes and dynamic scaling to make the webpage have a more responsive design. For this I used flexboxes to layout the container to show the information to the left and the image to the right and added a flex to the text to ensure it is formatted in a column. To scale the content as the browser width is decreased, I used a clamp that uses vw units for dynamic sizing that also suits multiple resolutions. <br>
When the display has been scaled below 940 pixels, the container is then oriented as a column instead of row and then centre aligns the content. Here I defined the text to stay a fixed size and allowed the image to continue scaling down until the webpage is minimum width. <br>

![Webpage Style](images/WP2.png) <br>

![Webpage Resize](images/WP3.png) <br>

Here is the outcome of the current webpage implementation, showing the 2 different layouts and the predefined information.

![Webpage Layout 1](images/WP4.png) <br>

![Webpage Layout 2](images/WP5.png) <br>

To receive the information from the microbit I need to be able to connect it to the webpage. For this I used components from a webpage that Toby provided us in DES221 that connects and either sends or receives serial data with a connected microbit. This was helpful giving me a basis to work from, though I needed to alter the serial component to receive the correct type of serial information I required. I used Chat GPT once more to help me with the following implementations. Thou I don't fully understand it, the serial component now receives the serial strings and dispatches a custom event to then use that information in my code. I ensured it was a modular event so I could define what serial values it would look for to define each section of my webpage. <br>

![Receive Serial](images/WP6.png) <br>

Then inside my java script it now listens for a serial value and then using that value, which is split into the received label and value, it checks for that label and then updates the associated id with that information. There are also 2 functions, 1 for adding the received Celcius and Fahrenheit serial data and adding it together to show as a single string on the webpage, and 1 for the temperature state so that the webpage will show 1 of 3 different string depending on the received state value. <br>

![Determine Serial](images/WP7.png) <br>

![Serial Functions](images/WP8.png) <br>

I am now testing that the microbit is connecting with the webpage and displaying the received serial data on the webpage. Below you can see the id's in my html that are updated from the java script function. And below that you can see that it is in fact receiving and displaying the information on the webpage. This was a big win as it was probably the most complex part of the project, which I could not have completed without Toby's code and the assistance of Chat GPT. Now I will just need to calculate more information on the microbit to send through such as BPM, active, and overall states so that I can display defined calculated statuses from the information and use those statuses to determine the type of cat images to show. I would also like to display the heart rate on a graph. <br>

![Update Webpage With Serial](images/WP9.png) <br>

![Displaying Serial Information](images/WP10.png) <br>

<br>

The next feature I added to my webpage was a chart that would display the live heartrate information of the pet. <br>

![Displaying Serial Information](images/WP13.png) <br>

For this I first accessed a chart library by adding the following line of code into my html "script src="https://cdn.jsdelivr.net/npm/chart.js"></script". Once added I had access to ready to go charts that could be adjusted to my requirements. Below is the code used to implement the chart I needed with help from ChatGPT. This was the result of an iterative process to get it to show the desired data whilst keeping the y axis range zoomed in showing only the current readouts with minor padding. It updates new data points whilst also removing old ones and the data it shows is received from the microbits heart rate smoothed serial value that is sent from my java function. <br>

![Initializing Chart](images/WP11.png) <br>

![Defining Chart Data](images/WP12.png) <br>

The chart already scales responsively, though to keep it within the desired container I needed to update the Css so it would stay the width of that container. <br>

![Chart Styling](images/WP14.png) <br>

### Finishing Microbit Code
The code on the microbit needed more functions to determine the active state, as well as the BPM state that would be used to determine the pet's overall health against the current temperature. I started with the active state that would determine how active the pet has been based of of how many steps the pet has taken. This was done similarly to the temperature state by checking the step count against 3 ranges. I did not use a check to determine if it was in the current state already as this would allow it to update to the webpage as soon as a step was taken, and the webpage could be updated with that check independently to ensure random pet images would not change every step. I chose for this state to not be calculated into the pet's health as cats are fairly bi-polar in terms of activity. <br>

![Active State](images/MC9.png) <br>

Next, I setup the BPM state. This was the same as the temperature state, checking the BPM against 3 different ranges and only updating if the state has changed to avoid playing the notification sound multiple times. These states are then sent as serial values for the webpage to interpret and update. <br>

![BPM State](images/MC10.png) <br>

I then updated the pet state function to be determined by both the ambient temperature state and the BPM state. I could have avoided such a long check for state 0 by only having 2 states, however I wanted a 3rd state to show a sadder image if the BPM or temperature were high. <br>
It calculates state 0 by checking if temp and BPM state is currently 0, or if 1 of them is currently 0. Now thinking about it I probably could have just done the latter for the same result.

![Pet State](images/MC11.png) <br>

The majority of the Microbit code is now completed and will only need adjustments to values later on during tests to ensure the step counter and BPM are calculating appropriately. <br>

### Webpage Development Cont.
Now that the microbit code is complete, I needed the webpage to receive and interpret the new data. For this I added new cases to my event listener, checking for the new serial values from the microbit. The values required functions similarly to the temp state to interpret which state is received and then update the document with the desired string. <br>

![Updating Event Listener](images/WP15.png) <br>

Below is the 3 new functions that are filtering this information similarly to the temp state function. Here you can also see where I have created multiple id's to display the information in multiple locations of the document. <br>

![Filtering Serial Data](images/WP16.png) <br>

Here is all the current serial data being displayed onto the webpage to test it is working. <br>

![Serial Data Tests](images/WP17.png) <br>

Now that I have confirmed that all the data is updating as intended, I can now start implementing the data into the correct locations of the webpage, replacing the placeholder information. After adding in all of the required secondary id elements in the java script as outlined above, I could then put these id's into their corresponding positions in the html. below is some of that information implemented in each section. <br> 

![Serial Data Tests](images/WP18.png) <br>

Now that the data is being received and displayed on the webpage, I now need to implement the random images to appear that are themed to the current state of each section. For this I searched for a cat image API that could potentially be used provided it gives me access to appropriate filter types to achieve this. In my research I found the website Cataas that has the option to get a random cat image that has a specific tag. This would give me the option to get happy, sad, and funny cat images. As well as some others for each pet health state. Below is an image of this API website and an example of the implementation I used. The only downside to this particular API is that its library only contains 1900 images, resulting in some tags only having a couple variant images. <br>

![Cataas API Website](images/WP19.png) <br>

I started with a random tagless cat image that could be used for the cat bio image. I also decided that as this image is not affiliated with any of the pet states, I wanted to add a button to this one that could generate a new random cat image when clicked to enhance the random cat image aspect of the webpage and feel more responsive in its design. Below is an image of the button and appropriate named image id being added to the html, and the function that the button calls when clicked that I will outline shortly. <br>

![Random Cat Button](images/WP20.png) <br>

To get the random cat image from the API I added a new function to the java script that could be called whenever the bio image is to be updated. Firstly, the function is called on load to add an initial random image to the webpage. To do this the function accesses the API to get a random cat image, and then it adds a timestamp to the image so that the image could be replaced later with a new image if needed and avoid caching of the current image. The bio image id is then updated with the new image. This will now work if the button is pressed also. <br>

![Random Cat Image Function](images/WP21.png) <br>

Here is the random cat image from the API being displayed onto the webpage, and when the button is clicked it is then replaced by a new webpage. I also added some styling to the button, adjusting its colour and the flexbox of the container it and the image are within so that it is displayed below the image. There are also some other styling changes I am testing here, mainly being the overview contain background. <br>

![Random Cat Image Test](images/WP22.png) <br>

Next, I implemented a similar method into each of the state functions, calling a different random tagged cat image of a certain type depending on the current state. To ensure the image is not replaced by a new image provided the function is called with the same state as the current, I added an additional if statement that checks the new state against the last to ensure it does not replace the image. This results in a new image being set only if the state has changed to a new image. To ensure the last state variable remembers the last state when called, I defined it as a property of the function. I applied this method to each of the other state functions. <br>

![Random Cat Image State Function](images/WP23.png) <br>

Here you can see the random images being selected that are of a different type depending on the current state. For example, in the first image the pet state is happy, resulting in a happy image. Whilst in the second image the pet state is unhappy, resulting in a sad cat image.

![Happy & Healthy Images](images/WP24.png) <br>

![Unhappy & Unhealthy Images](images/WP25.png) <br>

And here you can see completely different images being selected under the same circumstances in a different instance. <br>

![Happy & Healthy Images](images/WP26.png) <br>

In this image you can also see the current active status as lazy, resulting in a sleeping cat image <br>

![Lazy Cat Image](images/WP27.png) <br>

### Hardware Prototype Tests
With the core functionalities of the microbit and the webpage implemented and functioning, it is now time to setup a prototype and perform tests on my cat. Firstly, I tested connecting the microbit to my computer using Bluetooth, however I unfortunately cannot get the microbit to be detected on my PC. Though this is a problem with the core functionality of the portability and ease of checking the webpage whilst using it with a pet, for the sake of the prototype I will just have to test with an extra-long cable I have when testing the webpage, as well as testing other functionalities such as the step counter whilst disconnected from the webpage. <br>
I started my prototype by getting an existing cat harness and affixing the microbit and powerpack to it using hair ties. For now, I am testing it without the pulse sensor, as it will not effectively read a heart rate with the code in its current state and depending on the outcome of different smoothing approaches I won't know if I will be able to use it on a pet or alternatively test that specific function on myself to showcase it properly functioning on the webpage. Below is my current harness prototype setup for testing with my cat. <br>

![Prototype Harness](images/PT1.png) <br>

I then tested it on my cat to ensure it is both comfortable for the pet and functional in its current design. If you look closely in this image, it is an earlier slightly different configuration of the components than shown in the previous image. I changed this configuration to the one shown in the previous image as the power pack was concealing the area to affix the leash, hindering the harnesses functionality. <br>

![Prototype Harness Comfort](images/PT2.png) <br>

Now that I have confirmed the prototype is comfortable and functional for the pet, I am moving onto testing the functionality of the step counter. Initial testing showed that the current accelerometer strength threshold was too strong, resulting in not enough steps being registered. This was due to my cat's steps being very soft. <br>

![Step Counter Tests](images/PT3.png) <br>

From research in the microbits accelerometer, I found that it uses 3 axis of movement and 2 axis of roll that are also calculated in negative values, and that the accelerometer device is not situated in the centre of the device that would also result in less accurate readings for certain movements. I found that with the current setup negative value rolls were not registering with the device. <br> 

![Step Counter Research](images/PT4.png) <br>

I attempted a different approach to the code to accommodate all directions of movement, mainly by accessing each accelerometer value independently and checking its positive and negative values against the strength threshold. Unfortunately, I did not like the results I was getting with this approach and decided the original approach would register steps more easily. So, I focused on refining the strength threshold until I found a good value to register each step the cat takes. That value is currently 1215 micro Gs, which registers each step but sometimes registers other slight movements also resulting in excessive step counts. So, I will need to refine this value further to ensure more accurate readouts. Below is the alternate approach that I tested. <br>

![Step Counter Adjustments](images/MC14.png) <br>

For no I am moving onto refining the pulse senor data for a smoother readout to ensure a more accurate BPM is calculated. For this I initially tried an additional approach to smooth the raw pulse sensor data before applying my current smoothing approach by calculating the average between 3 points of data received. I did not like this approach as it resulted in more sporadic readouts when smoothed further. So similarly to my initial approach I added an extra layer of smoothing after the first, to give a subtle smoothing to the already smoothed data. While this would not be the best approach, it did smooth out any unnecessary peaks in the data that would trigger the BPM checker. This resulted in a more accurate BPM. 

![Pulse Sensor Smoothing](images/MC13.png) <br>

Through my testing I also confirmed that all other features are working, such as the buttons showing the temperature, step count, and current BPM, or resetting the step counter. The states change accordingly when thresholds are reached, showing the updated pet state on the device. <br>

### Refining Webpage
Now that the majority of testing has been done, I have started refining the design of the webpage and adding other responsivity to its code. <br>
I started by adding new fonts accessed from the google font API. I added the font Teko for the header, and Teko for the body text. Another addition I added was a font icon I found online and copied into the header in its own class in case I decide to add any additional styling. This gave small cat icons to the title. <br>

![Webpage Fonts](images/WP28.png) <br>

Below is the result of the adjustments to the webpage including additional changes to the background colours, font weights, and padding of some elements. <br>

![Webpage Design](images/WP29.png) <br>

![Webpage Design](images/WP30.png) <br>

To add additional responsivity to the webpages design I added some minor hover effects to the overview sections' images and headers. The images boarder radius will animate in size when the mouse is hovered over it, and the header fonts will animate a gradient of colour that will fill across the font when they are hovered over.

![Webpage Design](images/WP31.png) <br>

Some last-minute changes I made to the microbit were removing any unnecessary serial messages to reduce bloat, and adjusting the step counter sensitivity strength to 1300 to reduce false step counts. <br>
Overall, the device works quite well. The device would have benefited from an additional function that would immediately update all status information on the webpage when connected. Right now, the step count status only updates to the webpage once a step has been registered on the device, and the heartrate status will only update upon changing status. The heart rate monitor does not effectively read the pets heart rate either and the heart rate shown in the demonstration clip is in fact my own, though it does not work as intended it shows that the device effectively reads a human's heart rate and updates the webpage.

## References
MeasureON! Dog Heart Rate Monitor - https://vetmeasure.com/continuous-heart-rate-monitor/ <br>
PetPace - https://petpace.com/ <br>
UID Temperature Monitoring System - https://www.uidevices.com/laboratory-animal-temperature/ <br>
Infrared Thermometer - https://www.gosupps.com/dog-ear-temperature-monitor-pet-infrared-thermometer-only-for-pets-measure-in-1-second-mute-function-c-f-switchable-blue.html?srsltid=AfmBOorF7DzYrcJCc1eii48Vd4hFJCoi1JKDK0yf57EgcQsOX40jelz-mm4 <br>
